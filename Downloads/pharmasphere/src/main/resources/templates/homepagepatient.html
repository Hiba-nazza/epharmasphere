<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Patient Home - ePharmaSphere</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/pharmacie.ico">
    <!-- Custom Google font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet">
    <!-- Bootstrap icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Core theme CSS (includes Bootstrap) -->
    <link href="css/styles.css" rel="stylesheet">
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
    
    <!-- Your additional stylesheets with Thymeleaf syntax -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/css/magnific-popup.css}" rel="stylesheet" />
    <link th:href="@{/css/jquery-ui.css}" rel="stylesheet" />
    <link th:href="@{/css/owl.carousel.min.css}" rel="stylesheet" />
    <link th:href="@{/css/owl.theme.default.min.css}" rel="stylesheet" />
    <link th:href="@{/css/aos.css}" rel="stylesheet" />
    <link th:href="@{/css/style.css}" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" th:href="@{/assets/pharmacie.ico}" />
</head>
<body>
<main class="flex-shrink-0">
    <!-- Navigation -->
    
    <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
        <div class="container px-5">
            <a class="navbar-brand" href="index.html"><span class="fw-bolder text-success">ePharmaSphere</span></a>

            <!-- Add a button-like link to the dashboardpatient.html page -->
            <a class="btn btn-success" href="dashboardpatient.html">Go to Dashboard</a>
        </div>
    </nav>
    <!-- Choose Nearest Pharmacy Section -->
    <section class="py-5">
        <div class="container px-5">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="text-center my-5">
                        <h2 class="display-5 fw-bolder"><span class="text-gradient d-inline">Choose the Nearest Pharmacy</span></h2>
                    </div>
                    <form>
                        <div class="mb-3">
                            <label for="pharmacySelect" class="form-label">Select Nearest Pharmacy</label>
                            <!-- Add this inside your form in homepagepatient.html -->
                            <label for="selectedPharmacy">Select a Pharmacy:</label>
                                <select id="selectedPharmacy" name="selectedPharmacy">
                                <option th:each="pharmacy : ${pharmacies}" th:value="${pharmacy.pharmacy_name}" th:text="${pharmacy.pharmacy_name}"></option>
                                </select>

                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Write a Message to the Pharmacy</label>
                            <textarea class="form-control" id="message" rows="4" placeholder="Enter your message"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="fileUpload" class="form-label">Upload a File</label>
                            <input type="file" class="form-control" id="fileUpload">
                        </div>
                        <button type="submit" class="btn btn-success">Send Message and/or File</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>
<!-- Footer -->
<footer class="bg-white py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto">
                <div class="small m-0">Copyright &copy; ePharmaSphere 2023</div>
            </div>
            <div class="col-auto">
                <a class="small" href="#">Privacy</a>
                <span class="mx-1">&middot;</span>
                <a class="small" href="#">Terms</a>
                <span class="mx-1">&middot;</span>
                <a class="small" href="#">Contact</a>
            </div>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS -->
<!-- Add this script block at the end of your HTML file, before the closing </body> tag -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
    // Find the form and add a submit event listener
    const form = document.querySelector('form');
    form.addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent the default form submission

        // Gather form data
        const formData = {
            pharmacy: document.getElementById('pharmacySelect').value,
            message: document.getElementById('message').value,
            // Handle file uploads using FormData
        };

        // Create FormData object for handling file uploads
        const formDataObject = new FormData(form);
        formDataObject.forEach((value, key) => {
            formData[key] = value;
        });

        // Make a POST request to the backend
        fetch('http://localhost:8081/patient/dashboard', {
            method: 'POST',
            headers: {
                // Omit 'Content-Type' header for FormData
            },
            body: formDataObject, // Use FormData for file uploads
        })
        .then(response => response.json())
        .then(data => {
            console.log('Success:', data);
            // Optionally, redirect to another page or update the UI
        })
        .catch((error) => {
            console.error('Error:', error);
            // Handle errors or display a message to the user
        });
    });
});

</script>

</body>
</html>
